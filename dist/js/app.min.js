function getRandomInt(t,e){return Math.floor(Math.random()*(e-t+1))+t}function removeSlash(t){return t.replace(/^\/|\/$/g,"")}function goToByScroll(t){$("html,body").animate({scrollTop:t.offset().top-65},"slow")}function isLocalStorageNameSupported(){var t="test",e=window.sessionStorage;try{return e.setItem(t,"1"),e.removeItem(t),!0}catch(n){return!1}}var App=function(){this.initRouting(),this.initNavigation(),this.getProducts()};App.prototype.getProducts=function(){this.getTemplate("modules/product").then(function(t){einzl.templates.product.resolve(t),einzl.templates.product=t});var t={action:"getProducts"};return this.askServer(t).then(function(t){t.status&&(einzl.products.resolve(t.result),einzl.products=t.result)})},App.prototype.askServer=function(t){return $.ajax({type:"POST",dataType:"json",url:"php/ajax.php",data:t}).done(function(){}).fail(function(e,n,o){console.log("AJAX Call failed"),console.log("tried to send this data:"),console.log(t),console.log("response data:"),console.log(e),console.log(n),console.log(o)})},App.prototype.initNavigation=function(){$(".hamburger-button").on("vclick",function(){$("header nav").toggleClass("open")}),$(".cart-button").on("vclick",function(){$("aside.cart-container").toggleClass("open")}),this.initAppRoutingLinks()},App.prototype.initAppRoutingLinks=function(){Modernizr.history&&($("a").off("vclick"),$("a").not('[target="_blank"]').on("vclick",function(t){t.preventDefault(),t.stopPropagation();var e=$(this).attr("href"),n=$(this).attr("title"),o=window.location.pathname;o!==e&&History.pushState("",n,e)}))},App.prototype.route=function(t){t||(t=removeSlash(window.location.pathname));var e;e="/"===t||""===t?"home":t,einzl.pages[e]&&einzl.pages[e].view.length>0?(einzl.pages[e].start(),ga("send","pageview")):(einzl.pages[e]=new Page(e),einzl.pages[e].createView().then(function(){einzl.pages[e].start(),ga("send","pageview")}))},App.prototype.getTemplate=function(t){return $.get("/templates/"+t+".hbs").then(function(t){return Handlebars.compile(t)})},App.prototype.initRouting=function(){var t=this,e=window.History;e.Adapter.bind(window,"statechange",function(){e.getState();t.route(null)})},$(document).ready(function(){window.einzl={pages:{},products:new $.Deferred,templates:{product:new $.Deferred}},einzl.app=new App,einzl.app.route(null),einzl.cart=new Cart,function(t,e,n,o,a,i,r){t.GoogleAnalyticsObject=a,t[a]=t[a]||function(){(t[a].q=t[a].q||[]).push(arguments)},t[a].l=1*new Date,i=e.createElement(n),r=e.getElementsByTagName(n)[0],i.async=1,i.src=o,r.parentNode.insertBefore(i,r)}(window,document,"script","//www.google-analytics.com/analytics.js","ga"),ga("create","UA-46833918-1","auto")});var Cart=function(){var t=this;this.getTemplate().then(function(){t.createView(),t.view.appendTo($(".cart"))})};Cart.prototype.getTemplate=function(){var t=this;return einzl.app.getTemplate("modules/cart").then(function(e){t.template=e})},Cart.prototype.createView=function(){var t=this.template();this.view=$(t)};var Page=function(t){this.name=t};Page.prototype.createView=function(){var t=this;return einzl.app.getTemplate("pages/"+this.name).then(function(e){var n=e();t.view=$(n),$.when(einzl.products).then(function(e){t.view.find("[data-product]").each(function(){var t=$(this),n=parseInt(t.attr("data-product"));$.each(e,function(){var e=this;return e.id===n?($.when(einzl.templates.product).then(function(n){var o=n(e);t.html(o)}),!1):void 0})})})})},Page.prototype.start=function(){einzl.pages.active=this,$("main").html(""),this.view.appendTo($("main"))};