function getRandomInt(t,e){return Math.floor(Math.random()*(e-t+1))+t}function removeSlash(t){return t.replace(/\/$/,"")}function goToByScroll(t){$("html,body").animate({scrollTop:t.offset().top-65},"slow")}function isLocalStorageNameSupported(){var t="test",e=window.sessionStorage;try{return e.setItem(t,"1"),e.removeItem(t),!0}catch(n){return!1}}var App=function(){this.initPages(),this.initRouting(),this.initNavigation(),this.getProducts()};App.prototype.getProducts=function(){var t=this,e={action:"getProducts"};return this.askServer(e).done(function(e){e.status&&t.getTemplate("modules/product").then(function(t){einzl.templates.product=t,$.each(e.result,function(t){einzl.products[t]=new Product(this)}),einzl.deferreds.product.resolve()})})},App.prototype.askServer=function(t){return $.ajax({type:"POST",dataType:"json",url:"php/ajax.php",data:t}).done(function(){}).fail(function(e,n,i){console.log("AJAX Call failed"),console.log("tried to send this data:"),console.log(t),console.log("response data:"),console.log(e),console.log(n),console.log(i)})},App.prototype.initNavigation=function(){$(".hamburger-button").on("vclick",function(){$("header nav").toggleClass("open")}),$(".cart-button").on("vclick",function(){$("aside.cart-container").toggleClass("open")}),this.initAppRoutingLinks()},App.prototype.initAppRoutingLinks=function(){Modernizr.history&&($("a").off("vclick"),$("a").not('[target="_blank"]').on("vclick",function(t){t.preventDefault(),t.stopPropagation();var e=$(this).attr("href"),n=$(this).attr("title"),i=window.location.pathname;i!==e&&History.pushState("",n,e)}))},App.prototype.initPages=function(){},App.prototype.findDestination=function(t){var e=null;return $.each(config.routes,function(){var n=!1;return $.each(this.slug,function(e,i){return i===t?(n=!0,!1):void 0}),n?(e=this,!1):void 0}),e?e:this.findDestination("/404")},App.prototype.route=function(t){t||(t=removeSlash(window.location.pathname)),console.log("route to: "+t);var e=this.findDestination(t);einzl.pages[e.id]&&einzl.pages[e.id].view.length>0?einzl.pages[e.id].start():(einzl.pages[e.id]=new Page(e),einzl.pages[e.id].start()),document.title=e.title,ga("send","pageview")},App.prototype.getTemplate=function(t){return $.get("/templates/"+t+".hbs").then(function(t){return Handlebars.compile(t)})},App.prototype.initRouting=function(){var t=this,e=window.History;e.Adapter.bind(window,"statechange",function(){e.getState();t.route(null)})},$(document).ready(function(){window.einzl={pages:{},products:[],templates:{},deferreds:{product:new $.Deferred}},einzl.app=new App,einzl.app.route(null),einzl.cart=new Cart,ga("create","UA-46833918-1","auto")}),function(t,e,n,i,o,a,r){t.GoogleAnalyticsObject=o,t[o]=t[o]||function(){(t[o].q=t[o].q||[]).push(arguments)},t[o].l=1*new Date,a=e.createElement(n),r=e.getElementsByTagName(n)[0],a.async=1,a.src=i,r.parentNode.insertBefore(a,r)}(window,document,"script","//www.google-analytics.com/analytics.js","ga");var Cart=function(){var t=this;this.getTemplate().then(function(){t.createView(),t.view.appendTo($(".cart"))})};Cart.prototype.getTemplate=function(){var t=this;return einzl.app.getTemplate("modules/cart").then(function(e){t.template=e})},Cart.prototype.createView=function(){var t=this.template();this.view=$(t)};var config={routes:[{title:"Home",id:"home",slug:["/home","/",""],hbsPath:"/pages/home"},{title:"Ringe",id:"rings",slug:["/ringe"],hbsPath:"/pages/ringe"},{title:"Ketten",id:"ketten",slug:["/ketten"],hbsPath:"/pages/ketten"},{title:"Armb√§nder",id:"bracelets",slug:["/armbaender"],hbsPath:"/pages/armbaender"},{title:"Impressum",id:"imprint",slug:["/impressum"],hbsPath:"/pages/impressum"},{title:"Developer Page",id:"f12",slug:["/f12"],hbsPath:"/pages/f12"},{title:"404",id:"404",slug:["/404"],hbsPath:"/pages/404"}]},Page=function(t){this.model=t};Page.prototype.createView=function(){var t=this;return einzl.app.getTemplate(this.model.hbsPath).then(function(e){var n=e();t.view=$(n),$.when(einzl.deferreds.product).then(function(){t.insertProducts()})})},Page.prototype.insertProducts=function(){this.view.find("[data-product]").each(function(){var t=$(this),e=parseInt(t.attr("data-product"));$.each(einzl.products,function(){var n=this.model.id;return e===n?(this.view.appendTo(t),!1):void 0})})},Page.prototype.start=function(){var t=this;this.view?(einzl.pages.active=this,$("main").children("section").detach(),this.view.appendTo($("main"))):this.createView().then(function(){t.start()})};var Product=function(t){this.model=t,this.createView()};Product.prototype.createView=function(){var t=einzl.templates.product(this.model);this.view=$(t),this.initController()},Product.prototype.initController=function(){var t=this;this.view.find(".drop").on("vclick",function(){alert(t.model.id)})};